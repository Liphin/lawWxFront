<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>联系我们</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/js/angularjs/angular.js"></script>
</head>

<style>
    .navigation div{
        width: 100px;
        height: 46px;
        padding-top: 10px;
        cursor: pointer;
    }
    .navigation div:hover{
        background: #e52f22;
    }

    .region{
        border: 2px solid #050b50;
        color: #050b50;
        cursor: pointer;
    }
    .region:hover{
        background: #050b50;
        color: white;
    }
    .point:hover{
        cursor: pointer;
    }
</style>
<body  style="font-family: 微软雅黑">

<div id="main" style="overflow-x: auto" align="center" ng-app="myApp" ng-controller="MyCtrl as ctrl">
    <!--头部-->
    <div style="width: 1230px; margin-top: 30px; position: relative" align="center">
        <!--企业信息logo和铭牌-->
        <img height="180" style="position: absolute; left: 20px;margin-top: -20px" src="http://gntqant.com/assets/img/mini/desktop05.jpg"/>

        <img width="650" height="150" style="position: relative;margin-left: -30px" src="http://gntqant.com/assets/img/mini/desktop06.PNG"/>

        <!--电话-->
        <div style="display: inline-block;position: absolute;right: 20px;top:40px">
            <i class="fa fa-volume-control-phone" style="color: #050b50; font-size: 30px;"></i>
            <h2 style="color: #050b50; font-size: 30px; display: inline-block; margin-left: 20px">400-024-1868</h2>
        </div>
    </div>

    <!--导航及轮播-->
    <div style="margin-top: 10px;background: #050b50;" align="center">
        <!--导航栏-->
        <div style="width: 1230px; height: 46px;">
            <div class="navigation" style="margin-left: 30px;display: flex; flex-direction: row;color: white; font-size: 17px">
                <div onclick="window.location='./index.html#main'">首页</div>
                <div onclick="window.location='./about.html'">关于我们</div>
                <div onclick="window.location='./index.html#regions'">业务领域</div>
                <div onclick="window.location='./contact.html'">联系我们</div>
            </div>
        </div>

        <!--地图-->
        <div style="width: 100%;background: white" align="center">
            <iframe src="baidumap.html" style="width: 1200px; height: 550px; overflow: hidden"></iframe>
        </div>
    </div>

    <!--表单填写-->
    <div style="margin-top: 40px;background: white">
        <div style="width: 100%;min-width: 1230px; min-height: 500px; background: url(http://gntqant.com/assets/img/mini/desktop15.jpg) no-repeat center center; background-size: cover; padding-top: 50px;padding-bottom: 60px ">
            <!--联系我们文字说明-->
            <div style="font-size: 50px;font-weight: bold;">Contact US</div>
            <div style="font-size: 42px;font-weight: bold; color: #050b50">联系我们</div>
            <div style="width: 100%;" align="center">
                <div style="text-align:center;width: 1230px;margin-top: 70px;min-height: 400px;font-size: 17px; text-align: left; padding: 30px;box-shadow: 0 0 10px #858585; border-radius: 20px;background: url(http://gntqant.com/assets/img/mini/desktop14.png) no-repeat center center;background-size: cover">
                    <!--这里填入联系我们的表单-->
                    <!--顶部关闭按钮-->
                    <div style="margin-left:458px;margin-top: -20px;height: 70px;width:250px;text-align: center;background: #54C19E;border-radius: 20px">
                        <span style="font-size: 30px;font-weight:bold;text-align: center; position: relative; top: 10px;color: white">欢迎留言</span>
                    </div>

                    <div style="margin-top: 20px;text-align: center;margin-left: -348px">
                        <div style="display: inline-block">
                            <span style="margin-left: 20px;font-weight: bold;font-size: 25px;font-family: 华文楷体;color: white">称呼：</span>
                            <input class="inputStyle" style="border-radius: 10px;margin-left: 10px; width: 242px;background-color: #c5eff5" type="text" ng-model="ctrl.msgInfo['name']" maxlength="50"
                                   placeholder="">
                        </div>
                    </div>
                    <div style="margin-top: 20px;text-align: center;margin-left: 40px">
                        <span style="margin-left: 20px;font-weight: bold;font-size: 25px;font-family: 华文楷体;color: white">电话：</span>
                        <input class="inputStyle" style="border-radius: 10px;margin-left: 10px; width: 242px;background-color: #c5eff5" type="text" ng-model="ctrl.msgInfo['phone']" maxlength="50"
                               placeholder="">
                        <span style="margin-left: 50px;font-weight: bold;font-size: 25px;font-family: 华文楷体;color: white">邮件：</span>
                        <input class="inputStyle" style="border-radius: 10px;margin-left: 10px; width: 242px;background-color: #c5eff5" type="text" ng-model="ctrl.msgInfo['mail']" maxlength="50"
                               placeholder="">
                    </div>

                    <!--业务描述-->
                    <div style="margin-top: 20px;margin-left: 20px;text-align: center">
                        <div style="margin-left: -550px;font-weight: bold;font-size: 25px;font-family: 华文楷体;color: white">业务描述：</div>
                        <textarea class="textAreaStyle" style="border-radius: 10px;margin-top:20px;background-color: #c5eff5;width: 650px; height: 200px" ng-model="ctrl.msgInfo['content']" maxlength="2000"
                                  placeholder=""></textarea>
                    </div>

                    <!--保存按钮-->
                    <div style="width: 100%; height: 50px;text-align: center;padding-top: 17px; border: 1px solid lightgrey; border-width: 1px 0 0 0; margin-top: 20px">
                        <button ng-click="ctrl.cancleInfo()" class="btn btn-default"
                                style="display:inline;width: 100px;height: 40px">重置
                        </button>
                        <button ng-click="ctrl.saveMsgInfo()" class="btn btn-success"
                                style="margin-left:80px;display:inline;width: 100px;height: 40px">提交
                        </button>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <!--尾部-->
    <div style="width: 100%; height: 200px;background: #000000;" align="center">
        <div style="width: 1230px;margin-top: 30px; color: white; position: relative;text-align: left">
            <div style="padding-top: 40px">
                <span class="point" onclick="window.location='./index.html#main'" >首页</span>
                <span class="point" onclick="window.location='./about.html'" style="margin-left: 20px">关于我们</span>
                <span class="point" onclick="window.location='./contact.html'" style="margin-left: 20px">联系我们</span>
            </div>
            <div style="margin-top: 20px">
                <span>广东期待师事务所 律师咨询热线:400-024-1868</span>
                <span style="position: absolute; right: 20px">地址：广东省广州市盘区域富华东路518号桥力大厦三楼</span>
            </div>
        </div>
    </div>

    <!--loading加载动画-->
    <div ng-if="loadData" align="center" style="background: rgba(255,255,255,0.5);position: fixed;left: 0;right: 0;
            top: 0;bottom: 0; z-index:{{ctrl.zIndexHelper['loadData']}};text-align: center;">
        <img src="../assets/img/load/loader1.gif" style="margin-top: 100px;">
    </div>
    <!--获取数据动画-->
    <div ng-if="ctrl.overallData['loadData']" style="background: rgba(255,255,255,0.5);position: fixed;left: 0;right: 0; top: 0;bottom: 0;z-index:{{ctrl.zIndexHelper['loadData']}};text-align: center;">
        <div style="vertical-align: middle;display: inline-block">
            <div class="loader">
                <svg class="circular" viewBox="25 25 50 50">
                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>
                </svg>
            </div>
        </div>
        <div style="vertical-align: middle;width: 0;height: 100%;background: black;display: inline-block"></div>
    </div>

</div>

<script>
    var app = angular.module('myApp', []);
    app.factory('MyData',function () {
        var serverHost = 'http://gntqant.com';
        var frontSerPort = 80;
        var backSerPort = 8085;

        var saveMsgInfo = serverHost+":"+backSerPort+"/saveMsgInfo";
        var miniMainHtml = serverHost+":"+frontSerPort+"/src/officialPages/phone/mini/index.html";


        var requestDataErrorMsg = "尊敬的客户，服务异常，请稍后重试";

        var overallData = {
            loadData: false, //标识是否正在加载新闻数据
        };

        //留言信息管理
        var msgInfo = {
            'name':'',
            'phone':'',
            'mail':'',
            'content':'',
            'status_cd':0,
            'timestamp':'',
        };
        var zIndexHelper = {
            'loadData': 500000,
        };

        return {
            overallData:overallData,
            zIndexHelper:zIndexHelper,
            msgInfo:msgInfo,
            saveMsgInfo:saveMsgInfo,
            miniMainHtml:miniMainHtml,
            requestDataErrorMsg:requestDataErrorMsg,
        }
    });
    app.factory('MyGeneralSer',function ($window, $document, $http, MyData) {
        /** 工具类 **************************************************************************************/
        /**
         * 对数据进行判空处理
         * @param data
         */
        var checkDataNotEmpty = function (data) {
            var status = false;
            if (data != null && data != undefined) {
                //根据变量的不同类型进行判空处理
                switch (Object.prototype.toString.call(data)) {
                    /*String类型数据*/
                    case '[object String]': {
                        if (data.trim() != '') {
                            status = true;
                        }
                        break;
                    }
                    /*Array类型*/
                    case '[object Array]': {
                        if (data.length > 0) {
                            status = true;
                        }
                        break;
                    }
                    /*Object类型*/
                    case '[object Object]': {
                        if (Object.keys(data).length > 0) {
                            status = true;
                        }
                        break;
                    }
                    /*其他类型状态默认设置为true，分别为Number和Boolean类型*/
                    default: {
                        status = true;
                        break;
                    }
                }
            }
            return status;
        };

        /**
         * http get获取资源数据
         */
        var httpGetFiles = function (url, callback) {
            //设置loading状态
            MyData.overallData['loadData'] = true;

            $http({
                method: 'GET',
                url: url
            }).then(function successCallback(response) {
                if (response['status'] == 200) {
                    //返回正确操作后执行回调函数
                    callback(response['data'])

                } else {
                    alert(MyData.requestDataErrorMsg + ",.");
                }
            }, function errorCallback(err) {
                alert(MyData.requestDataErrorMsg + ".,");

            }).finally(function () {
                //重置loading状态
                MyData.overallData['loadData'] = false;
            });
        };


        /**
         * http post获取资源数据
         */
        var httpPostData = function (url, obj, callback) {
            //设置loading状态
            MyData.overallData['loadData'] = true;

            var fd = new FormData();
            //动态装载数据
            for (var i in obj) {
                fd.append(i, obj[i]);
            }
            $http.post(url, fd, {
                transformRequest: angular.identity,
                headers: {'Content-Type': undefined},

            }).success(function (response) {
                //返回正确操作后执行回调函数
                // callback(response);
                if (response['status_code'] == 200) {
                    //返回正确操作后执行回调函数
                    callback(response['data']);

                } else {
                    alert(MyData.requestDataErrorMsg + ".");
                }
            }).error(function (err) {
                alert(MyData.requestDataErrorMsg + ",");

            }).finally(function () {
                //设置loading状态
                MyData.overallData['loadData'] = false;
            });
        };


        /**
         * 组装生成新闻时间
         * @param createTime
         * @returns {string}
         */
        var generateShowTime = function (createTime) {
            var today = new Date();
            today.setHours(0);
            today.setMinutes(0);
            today.setSeconds(0);

            var replaceTime = createTime.replace(/\-/g, "/");
            var targetTime = new Date(replaceTime);
            if (today - targetTime < 0) {
                //当天发的新闻
                var Hours=targetTime.getHours();
                var Minutes=(targetTime.getMinutes()).toString();
                if (Minutes.length<2) {
                    Minutes="0"+Minutes;
                }

                return Hours + ":" + Minutes;

            } else {
                //之前发的新闻
                return (targetTime.getMonth()+1) + "月" + targetTime.getDate() + "日";
            }
        };

        return {
            checkDataNotEmpty:checkDataNotEmpty,
            httpGetFiles:httpGetFiles,
            httpPostData:httpPostData,
            generateShowTime:generateShowTime,

        }
    });
    app.factory('MySer',function ($window, $document, $http, MyData, $location, MyGeneralSer) {
        var saveMsgInfo = function () {
            if(!MyGeneralSer.checkDataNotEmpty(MyData.msgInfo['name'])) {
                alert("请输入您的称呼");
                return;
            }
            else if(!MyGeneralSer.checkDataNotEmpty(MyData.msgInfo['phone'])&&!MyGeneralSer.checkDataNotEmpty(MyData.msgInfo['mail'])) {
                alert("请输入您的联系电话或邮箱");
                return;
            }
            else if(!MyGeneralSer.checkDataNotEmpty(MyData.msgInfo['content'])) {
                alert("请输入您需要咨询的问题");
                return;
            }

            var timestamp = (new Date()).valueOf();
            MyData.overallData['loadData'] = true;
            MyData.msgInfo['timestamp'] = timestamp;

            MyGeneralSer.httpPostData(MyData.saveMsgInfo,MyData.msgInfo,function (response) {
                MyData.overallData['loadData'] = false;
                alert("感谢您的信任，我们会尽快安排专业的律师与您联系");
                cancleInfo();
            });
        }

        var cancleInfo = function () {
            MyData.msgInfo['name']='';
            MyData.msgInfo['phone']='';
            MyData.msgInfo['mail']='';
            MyData.msgInfo['content']='';
            //$rootScope.$apply();
        }



        return {
            saveMsgInfo:saveMsgInfo,
            cancleInfo:cancleInfo,
        }
    });
    app.controller('MyCtrl',function ($scope,MyData,MySer) {
        var ctrl = this;
        ctrl.msgInfo = MyData.msgInfo;
        ctrl.overallData = MyData.overallData;

        /**
         * 保存留言
         * @see MySer.saveMsgInfo
         */
        ctrl.saveMsgInfo = function () {
            MySer.saveMsgInfo();
        }
        /**
         * 重置面板
         * @see MySer.cancleInfo
         */
        ctrl.cancleInfo = function () {
            MySer.cancleInfo();
        }
    });
</script>

</body>
</html>